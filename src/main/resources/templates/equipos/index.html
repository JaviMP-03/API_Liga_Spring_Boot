<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Gestión de Equipos</title>
    <link rel="stylesheet" th:href="@{/css/equipos.css}">
</head>
<body>
	
	<h3>API CREADA POR Javier Martínez Pérez</h3>

	<a href="https://www.linkedin.com/in/javier-mart%C3%ADnez-p%C3%A9rez-7843451a4/" target="_blank">
	    Mi LinkedIn
	</a>

	<br><br>

	<a href="https://github.com/JaviMP-03" target="_blank">
	    Mi GitHub
	</a>

	
	<div class="boton-agregar-container">
	    <a th:href="@{/jugadoresGUI/todos}" class="btn-agregar">
	        Ver todos los jugadores
	    </a>
	</div>
	
<h1>Gestión de Equipos</h1>

<!-- TABLA DE EQUIPOS -->
<div class="tabla-container">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>Fecha fundación</th>
                <th>Estadio</th>
                <th>Capacidad</th>
                <th>Entrenador</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            <tr th:each="equipo : ${equipos}">
                <td th:text="${equipo.id}"></td>
                <td th:text="${equipo.nombre}"></td>
                <td th:text="${equipo.fechaFundacion}"></td>
                <td th:text="${equipo.nombreEstadio}"></td>
                <td th:text="${equipo.capacidad}"></td>
                <td th:text="${equipo.nombreEntrenador}"></td>
                <td>
                    <a th:href="@{/equiposGUI/editar/{id}(id=${equipo.id})}" class="btn-editar">Editar</a>
                    <a th:href="@{/equiposGUI/eliminar/{id}(id=${equipo.id})}" 
                       onclick="return confirm('¿Seguro?')" class="btn-eliminar">Eliminar</a>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- BOTON AGREGAR EQUIPO -->
<div class="boton-agregar-container">
    <a th:href="@{/equiposGUI/nuevo}" class="btn-agregar">Agregar Equipo</a>
    <a th:href="@{/jugadoresGUI/nuevo}" class="btn-agregar">Añadir Jugador</a>
</div>

<!-- COMBOBOX + TEXTBOX -->
<div class="jugadores-container">
    <div class="selector">
        <h2>Seleccionar equipo</h2>
        <select id="equipoSelect" onchange="cargarJugadores()">
            <option value="">-- Selecciona un equipo --</option>
            <option th:each="equipo : ${equipos}" th:value="${equipo.id}" th:text="${equipo.nombre}"></option>
        </select>
    </div>
	<div class="textbox">
	    <h2>Jugadores</h2>
	    <div id="resultadoJugadores">
	        Selecciona un equipo para ver sus jugadores
	    </div>
	</div>
</div>

<script>
function cargarJugadores() {
    const idEquipo = document.getElementById("equipoSelect").value;
    const contenedor = document.getElementById("resultadoJugadores");

    if (idEquipo === "") {
        contenedor.innerHTML = "Selecciona un equipo para ver sus jugadores";
        return;
    }

    fetch('/jugadoresGUI/equipoTexto/' + idEquipo)
        .then(response => response.json())
        .then(data => {

            let salida = "";

            data.forEach(j => {
                salida += "Nombre: " + j.nombre +
                          ", Edad: " + j.edad +
                          ", Posición: " + j.posicion +
                          ", Salario: " + j.salario +
                          ", Dorsal: " + j.dorsal +
                          "<br>";
            });

            contenedor.innerHTML = salida;
        });
}
</script>


</body>
</html>
